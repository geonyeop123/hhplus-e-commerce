# 선착순 쿠폰 이벤트 오류 대응

### 상황

6.3 대선 특집 선착순 쿠폰 이벤트에서 쿠폰 발급이 되지 않는 오류 발생

### 원인

14:00에 이벤트가 시작되었고, 이전 부하 테스트를 통해 초당 800건 정도의 데이터를 수용할 수 있다고 판단하였으며, 4천명 정도의 고객을 예상

![loadTest_grafana.png](img/loadTest_grafana.png)

(배포 당시 부하테스트 자료)

예상과는 다르게 5만명의 고객이 참여하였으며, 수용 불가한 트래픽이 발생하여 timeout이 발생하였습니다.

### 해결

현재 API server의 개수를 5개 이상 증설 및 로드벨런서를 구성하여 보다 많은 트래픽을 수용할 수 있게 변경

지속적으로 모니터링하여 추가 개선 예정

이후 MSA를 도입하여 특정 서버만 증설할 수 있도록 서비스 개선